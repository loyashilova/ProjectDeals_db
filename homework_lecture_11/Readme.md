# Домашнее задание по лекции 11

## Индексы

1. Создать индекс к какой-либо из таблиц вашей БД. 
2. Прислать текстом результат команды explain, в которой используется данный индекс

Стоимость запроса до создания индекса.

![img_2.png](img_2.png)

На вторичный ключ в таблице deal.clientadress создаем индекс adr_ind, и снова считаем стоимость.
Индексы подхватились.

![img_3.png](img_3.png)

3. Реализовать индекс для полнотекстового поиска 

Для полнотекстового поиска создано поле full_adr_lexeme с типом tsvector, в котором есть город и улица из адреса, чтобы можно было искать клиентов по подходящему региону.
Сначала посмотрели на скорость работы селекта без индекса:
![img_8.png](img_8.png)

Создаем индекс на поле full_adr_lexeme. Скорость выполнения селекта в разы выше.
![img_9.png](img_9.png)

4. Реализовать индекс на часть таблицы или индекс на поле с функцией
Делаем выборку среди клиентов, имя которых начинается на e37.
Предположим, по первым трем буквам клиентов распределили для разных менеджеров.
Запрос без индекса:
![img_4.png](img_4.png)

Создаем индекс на функцию, которая отрезает первые три символа в имени клиента.
Запрос с индексом работает гораздо быстрее.
![img_5.png](img_5.png)

6. Создать индекс на несколько полей

Если есть частая необходимость искать клиентов по региону: страна, город, то обычный запрос отрабатывает долго.
![img_10.png](img_10.png)

Создаем индекс на 2 поля, и видим, что скорость выполнения запроса гораздо быстрее.
![img_11.png](img_11.png)


8. Написать комментарии к каждому из индексов. Описать что и как делали и с какими проблемами
столкнулись.

Индекс adr_ind создан на вторичный ключ, после чего запрос стал отрабатывать быстрее.

На небольшом кол-ве данных индексы не используются. Пришлось добавить очень много записей, чтобы они заработали.
Индекс автоматически создается по ограничению на уникальность. Обнаружила это опытным путем.:)

Основная сложность в наполнении таблиц данными.